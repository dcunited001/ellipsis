:PROPERTIES:
:ID:       b03d47fc-e81c-409f-bf95-0d973930e73f
:END:
#+TITLE: Guix Desktop
#+PROPERTY: header-args :mkdirp yes
#+PROPERTY: header-args:sh   :tangle-mode (identity #o555)
#+PROPERTY: header-args:conf :tangle-mode (identity #o555)
#+OPTIONS: toc:nil

* Table of Contents :TOC_3_gh:
- [[#system-settings][System Settings]]
  - [[#disk-mounting][Disk Mounting]]
  - [[#user-services][User Services]]
  - [[#scheduled-tasks][Scheduled Tasks]]
- [[#fonts][Fonts]]
- [[#themes][Themes]]
  - [[#color-schemes][Color Schemes]]
    - [[#generate-css-color-schemes-from-an-org-table][generate =<<css-color-schemes>>= from an org-table]]
- [[#input][Input]]
  - [[#fcitx5][FCITX5]]
- [[#window-management][Window Management]]
  - [[#i3][i3]]
- [[#panel][Panel]]
  - [[#waybar][Waybar]]
    - [[#destructure--tangle-waybar-config][destructure & tangle waybar config]]
- [[#launchers][Launchers]]
- [[#desktop-notifications][Desktop Notifications]]
  - [[#dunst][Dunst]]
- [[#display-management][Display Management]]
- [[#xdg][XDG]]
  - [[#desktop-entries][Desktop Entries]]
  - [[#restrict-autostart-entries][Restrict Autostart entries]]
  - [[#mime-handlers][MIME Handlers]]
- [[#applications][Applications]]
  - [[#browsers][Browsers]]
  - [[#password-management][Password Management]]
  - [[#audio-device-control][Audio Device Control]]
  - [[#media-players][Media Players]]
    - [[#mpv][MPV]]
    - [[#codecs-and-drivers][Codecs and Drivers]]
  - [[#image-viewers-and-editors][Image Viewers and Editors]]
  - [[#games][Games]]
  - [[#document-readers][Document Readers]]
    - [[#zathura-and-configzathurazathurarc][Zathura and =.config/zathura/zathurarc]]
  - [[#syncthing][Syncthing]]
  - [[#flatpak][Flatpak]]
  - [[#printing][Printing]]
  - [[#desktop-tools][Desktop Tools]]
    - [[#xdg-1][XDG]]
  - [[#system-tools][System Tools]]
- [[#desktop-profile][Desktop Profile]]

**** TODO tangle permissions
**** TODO set the org-babel :comments format
- run =find . -name "ob-*.el" -type f -exec grep --color=auto -nH --null -e 'comment' \{\} += from within the org repo
- look in =ob-core= for interface and elsewhere for =(comment-region)= refs
- until then, treat sway configs as =shell=

* System Settings

** Disk Mounting

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"udiskie"
#+end_src

** User Services


** Scheduled Tasks


* Fonts

*Guix Packages"

#+begin_src scheme :noweb-ref packages :noweb-sep ""
  ;; GTK Themes
  "arc-icon-theme"
  "matcha-theme"
  "hicolor-icon-theme"
  "gnome-icon-theme"
  "gnome-backgrounds"
  "papirus-icon-theme"
  "breeze-icons"

  ;; Fonts
  "font-fira-code"
  "font-jetbrains-mono"
  "font-iosevka"
  "font-iosevka-aile"
  "font-abattis-cantarell"
  "font-dejavu"
  "font-google-noto"
  "font-gnu-freefont"
  "font-liberation"
  "font-awesome"
  "font-google-material-design-icons"
  "gs-fonts"

  ;; more fonts
  "font-juliamono"
  "font-dejavu"
#+end_src

*.config/fontconfig/fonts.conf*

#+begin_src xml :tangle .config/fontconfig/fonts.conf
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>
  <dir>~/.dotfiles/fonts</dir>
  <dir>~/.guix-extra-profiles/desktop/desktop/share/fonts</dir>
  <alias>
    <family>Apple Color Emoji</family>
    <prefer>
      <family>Noto Color Emoji</family>
    </prefer>
  </alias>
</fontconfig>
#+end_src

* Themes

** Color Schemes

*** TODO generate =<<css-color-schemes>>= from an org-table
+ [ ] import them into =waybar.css= and other css
+ [ ] add button in waybar to trigger colorscheme change
+ [ ] load random color scheme with sway

* Input

** FCITX5

#+*Guix Packages"

#+begin_src scheme :noweb-ref packages :noweb-sep ""

#+end_src

**** TODO guix packages for FCITX5

* Window Management

** i3



* Panel

** Waybar

*.config/waybar/config:*

*** TODO destructure & tangle waybar config

* Launchers

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""

#+end_src

* Desktop Notifications

** Dunst

[[https://dunst-project.org/][Dunst]] displays desktop notifications.

* Display Management



* XDG

** Desktop Entries
** Restrict Autostart entries

**** TODO review =.config/autostart/*=

** MIME Handlers

*.config/mimeapps.list*

#+begin_example conf
#+begin_src conf :tangle .config/mimeapps.list
[Default Applications]
text/html=qutebrowser.desktop
x-scheme-handler/http=qutebrowser.desktop
x-scheme-handler/https=qutebrowser.desktop
x-scheme-handler/about=qutebrowser.desktop
x-scheme-handler/unknown=qutebrowser.desktop
#+end_src
#+end_example

* Applications

** Browsers

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
;; "qutebrowser"
"nyxt"
#+end_src

** Password Management

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"pwsafe"
#+end_src

** Audio Device Control

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"alsa-utils"
"pavucontrol"
#+end_src



** Media Players

*** MPV

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"mpv"
"mpv-mpris"
"youtube-dl"
"playerctl"
#+end_src


*** Codecs and Drivers

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"gstreamer"
"gst-plugins-base"
"gst-plugins-good"
"gst-plugins-bad"
;; "gst-plugins-ugly"
"gst-libav"
;; "intel-vaapi-driver"
"libva-utils"
#+end_src

** Image Viewers and Editors


*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"feh"
;;"gimp"
"scrot"
#+end_src

** Games

*.config/guix/manifests/games.scm*

#+begin_src scheme :tangle .config/guix/manifests/games.scm :noweb yes
(specifications->manifest
 '("aisleriot"
   "gnome-mahjongg"))
#+end_src

** Document Readers

*** TODO Zathura and =.config/zathura/zathurarc

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"zathura"
"zathura-pdf-mupdf"
#+end_src


** Syncthing

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
;; "syncthing"
;; "syncthing-gtk"
#+end_src

** Flatpak

*Applications to Install*

#+begin_example sh
flatpak remote-add --user --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo
flatpak remote-add --user --if-not-exists flathub-beta https://flathub.org/beta-repo/flathub-beta.flatpakrepo
flatpak install --user flathub com.spotify.Client
flatpak install --user flathub com.valvesoftware.Steam
flatpak install --user flathub com.microsoft.Teams
flatpak install --user flathub com.discordapp.Discord
flatpak install --user flathub-beta com.obsproject.Studio
#+end_example

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"flatpak"
#+end_src


** Printing

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"system-config-printer"
#+end_src

** Desktop Tools

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"compton"
;;"redshift"
"gucharmap"
"fontmanager"
#+end_src

+ compton :: an alternative compositor for X
  - incompatible in Wayland, since it doesn't offer modular compositors
+ redshift :: control color temperature according to surroundings.
  - requires =libxcb= X11 client lib
  - for wayland: =gammastep= or =wlsunset=
+ gucharmap :: unicode character map (GTK)
+ fontmanager :: provides GTK tools to aid configuration of fonts
+ brightnessctl :: lightweight brightness control tool

*** XDG

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""
"xdg-utils"          ;; for xdg-open, etc
"xdg-dbus-proxy"     ;; for Flatpak
"gtk+:bin"           ;; for gtk-launch
"glib:bin"           ;; for gio-launch-desktop
"shared-mime-info"   ;; for mimes
#+end_src

** System Tools

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""

#+end_src

* Desktop Profile

*.config/guix/manifests/desktop.scm*

#+begin_src scheme :tangle .config/guix/manifests/desktop.scm :noweb yes
(specifications->manifest
 '(
   <<packages>>
    ))

#+end_src

**

*Guix Packages*

#+begin_src scheme :noweb-ref packages :noweb-sep ""

#+end_src
