# ---------------------------------------------
# Modifiers for Audio & Music
$wsAudio=audio
$wsAudioMod=MOD3
$wsAudioKey=code:121

$wsMusic=music
$wsMusicMod=MOD3
$wsMusicKey=code:123

# hyprlang if HYPRHOSTKHARIS
$wsAudioKey=F2
$wsMusicKey=F9
# hyprlang endif

# hyprlang if HYPRHOSTKRATOS
#
# hyprlang endif

# ---------------------------------------------
# Note

# _______________________
# on kratos

# - MOD3 + volMute => wsAudio
# - MOD3 + volDown => ...? (idk yet, but it's close to insert)
# - MOD3 + volUp => wsMusic

# these require one hand: (workflow is probably here disrupted anyway)

# _______________________
# on kharis

# - ghost key issues when combining MOD3+xf64 keys
# - kharis lacks play/pause buttons
# - this is not ideal, but something i need to test... otherwise i should
#   abandon the idea of using MOD3 across multiple systems entirely
# - MOD3+SHIFT does not work with FN keys
#   - SHIFT+FN requires pressing shift first...
#   - this causes a key ghosting issue. idk if it's only related to MOD3 Latch
#     since it still works for 0-9

# ---------------------------------------------
# keybinds

# TODO fix hyprland border colors: ugh smh... so confused.
#
# this is perfectly fine (and rainbow-mode highlights it when rainbow-html-colors)
#
# col.active_border = rgba(51,204,255,0.9) rgba(0,255,153,0.9) 45deg
#
# this is not
#
# $wsAudioBordercolor=rgba(221,51,51,239) / rgba(204,51,119,119) 45deg rgba(60,199,58,136) / rgba(204,51,119,119) 45deg
# windowrule = bordercolor rgba(221,51,51,0.98) / rgba(204,51,119,0.66) 45deg rgba(60,199,58,0.5) / rgba(204,51,119,0.66) 45deg, , class:(hyprpwcenter)
#
# instead, use this format here (i guess commas mess up dispatchers)
#
# $wsAudioBordercolor=rgba(221,51,51,239) / rgba(204,51,119,119) 45deg rgba(60,199,58,136) / rgba(204,51,119,119) 45deg
# $wsAudioBordercolor=rgba(221 51 51 239) / rgba(204 51 119 119) 45deg rgba(60 199 58 136) / rgba(204 51 119 119) 45deg
$wsAudioBordercolor=rgba(44CC6688) / rgba(BBCC7777) 45deg rgba(44CC6688) / rgba(BB334466) 45deg

# $wsMusicMon=$m1port # special

# binding to XF86 events without modifiers eats the whole key
# binding to scan codes does not (my Garuda laptop: there's no difference)

# ---------------------------------------------
# Audio Control

$k86VolUp=code:123
$k86VolDown=code:122
$k86VolMute=code:121
$k86MicMute=code:256

# wev receives events:
# - XF86AudioPause on: fn shift f11

# 122 XF86AudioLowerVolume
# 123 XF86AudioRaiseVolume

# 121 XF86AudioMute
# 256 XF86AudioMicMute (not on dell pc-104)

# Output Volume
binde = ,$k86VolUp, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
binde = ,$k86VolDown, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-

# Mute Input/Output
binde = ,$k86VolMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
binde = ,$k86MicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# ---------------------------------------------
# Music control

$k86AudNext=code:171
$k86AudPlayPause=code:172
$k86AudPrevious=code:173
# $k86Search

# xf86AudioPlay: fn+f11
# xf86AudioPlayPause: fn+shift+f11

# hyprlang if HYPRHOSTKRATOS

# NB: these end up being doubly bound on kharis
bind = ,$k86AudNext, exec, playerctl next
bind = ,$k86AudPlayPause, exec, playerctl play-pause
bind = ,$k86AudPrevious, exec, playerctl previous
# hyprlang endif

# ---------------------------------------------
# Audio Workspace

workspace = special:$wsAudio, bordersize:10, on-created-empty:[float] uwsm app -- hyprpwcenter
windowrule = bordercolor $wsAudioBordercolor, class:(hyprpwcenter)

# workspace = special:$wsAudio, on-created-empty:[float] qpwgraph
# qpwgraph don't start right (starts taskbar thing)

bind = $wsAudioMod, $wsAudioKey, togglespecialworkspace, $wsAudio
bind = $wsAudioMod SHIFT, $wsAudioKey, movetoworkspacesilent, special:$wsAudio

# helvum
windowrule = workspace special:$wsAudio, class:(org.pipewire.Helvum)
windowrule = float, class:(org.pipewire.Helvum)
windowrule = move 5% 5%, class:(org.pipewire.Helvum)
windowrule = bordercolor $wsAudioBordercolor, class:(org.pipewire.Helvum)

# qpwgraph
windowrule = workspace special:$wsAudio, class:(org.rncbc.qpwgraph)
windowrule = float, class:(org.rncbc.qpwgraph)
windowrule = size 48% 27%, class:(org.rncbc.qpwgraph)
windowrule = move 100%-w-5% 100%-w-5%, class:(org.rncbc.qpwgraph)
windowrule = bordercolor $wsAudioBordercolor, class:(org.rncbc.qpwgraph)

# pavucontrol
windowrule = workspace special:$wsAudio, class:(org.pulseaudio.pavucontrol)
windowrule = float, class:(org.pulseaudio.pavucontrol)
windowrule = size 25% 25%, class:(org.pulseaudio.pavucontrol)
windowrule = move 100%-w-5% 5%, class:(org.pulseaudio.pavucontrol)
windowrule = bordercolor $wsAudioBordercolor, class:(org.pulseaudio.pavucontrol)

# ---------------------------------------------
# Music Workspace

workspace = special:$wsMusic, bordersize:10, on-created-empty:[float] vlc

bind = $wsMusicMod, $wsMusicKey, togglespecialworkspace, $wsMusic
bind = $wsMusicMod SHIFT, $wsMusicKey, movetoworkspacesilent, special:$wsMusic

$vlcTitle=VLC media player
windowrule = workspace special:$wsMusic, class:(vlc)
windowrule = float, class:(vlc), title:($vlcTitle)
windowrule = size 1280 720, class:(vlc), title:($vlcTitle) # otherwise starts in 4:3
windowrule = move 10% 10%, class:(vlc), title:($vlcTitle)
windowrule = keepaspectratio, class:(vlc), title:($vlcTitle)
windowrule = bordercolor $wsAudioBordercolor, class:(vlc), title:($vlcTitle)
